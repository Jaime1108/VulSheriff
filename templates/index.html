{% extends 'web.html' %}
{% block content %}
<form action="{{ url_for('analyze') }}" method="post" enctype="multipart/form-data" class="row g-3">
  <div class="col-12">
    <label for="zip_file" class="form-label">1) Project ZIP</label>
    <input class="form-control" type="file" id="zip_file" name="zip_file" accept=".zip">
    <div class="form-text">Optional for testing. Included files capped at {{ max_files }} files, {{ max_total }} total, {{ max_file }} per file.</div>
  </div>

<!--
  <div class="col-md-4">
    <label for="model" class="form-label">Model</label>
    <input type="text" class="form-control" id="model" name="model" value="{{ default_model }}">
    <div class="form-text">Use openrouter/auto or specify a model ID.</div>
  </div>
  -->

  <div class="col-12">
    <label for="notes" class="form-label">2) Analysis Context (optional)</label>
    <textarea class="form-control" id="notes" name="notes" rows="4" placeholder="e.g., Django + React; prioritize auth flows and API endpoints"></textarea>
  </div>

  <div class="col-12 form-check">
    <input class="form-check-input" type="checkbox" value="on" id="prompt_only" name="prompt_only">
    <label class="form-check-label" for="prompt_only">
      Prompt-only (no ZIP) — send just the text above
    </label>
    <div class="form-text">Leave ZIP empty and check this to test the OpenRouter call with your notes only.</div>
  </div>
 <!---
  <div class="col-12 form-check">
    <input class="form-check-input" type="checkbox" value="on" id="debug" name="debug">
    <label class="form-check-label" for="debug">
      Enable debug logging (prints details to terminal)
    </label>
    <div class="form-text">You can also set env var VULNSHERIF_DEBUG=1 to always enable.</div>
  </div>

  <div class="col-12 form-check">
    <input class="form-check-input" type="checkbox" value="on" id="dry_run" name="dry_run">
    <label class="form-check-label" for="dry_run">
      Dry run (don’t call OpenRouter) — show packaged payload only
    </label>
  </div>
-->

  <div class="col-12">
    <button class="btn btn-primary" type="submit">Analyze with OpenRouter</button>
  </div>
</form>
{% endblock %}

